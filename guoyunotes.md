## 2.1合约特征
### 事务性
在合约中编写的函数要么全部被执行状态依次修改，要么全都回滚到未被修改的样子。（要活一起活，要完一起完）
不应该对参数重载
谨慎注意API的设计和进行错误处理。
### 错误处理
```solidity
require(condition,ERR_MESSAGE)
//or
revert customError()
```
### 运行成本
声明变量时的关键字、内联汇编、函数的状态,都会对运行成本有所影响
对外部白名单进行管理最好用MerkleProof

### 不可变
一旦部署无法动态替换或升级。
部署前考虑是否依赖可升级架构
### 可见性与权限
不应在合约中存储任何敏感数据
不应依赖区块当中的任何状态（区块高度和时间戳）作为核心业务逻辑的判断基准
基本：Ownable
复杂合约：AccessControl

### 安全性
遵循ConsenSys的合约代码安全最佳实践指南
足够多的测试用例与覆盖度

## 2.2 合约依赖与调用

### 依赖引入
import、npm、git submodule

### 调用
**只需知道地址和ABI**即可在合约内部调用其他合约
调用合约也是事务性操作
消耗额外的gas费用，调用失败不退钱
### ABI
如何操作一个合约的具体方法的描述。
通常在interface文件中被定义
Iblablabla.sol
### 合约事件
* 合约的函数调用是事务性的且无法为外部调用者提供返回值，故引入了事件的概念。
* 通过向日志系统中写入特定数据的方式来实现对函数修改的记录，通过监听和查询的方式列出合约注册的事件来实现对函数异步结果的查询和前端UI状态的变更。
* 以单一合约为key作为索引
* 在声明事件时，声明不多于三个index key来保证DApp前端对这些索引key的查询效率
* 如果非常复杂，采用Relay提供的graph/webhook来查询

### 创建合约
通过合约创建合约、通过钱包账户向0x00发送合约创建的操作来新建合约
